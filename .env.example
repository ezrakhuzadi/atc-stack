# Copy this file to `.env` and replace the `change-me-*` values.
# Never commit `.env` (it is ignored by `.gitignore`).

# =========================
# ATC Frontend / Server
# =========================
ATC_ENV=development
ATC_FRONTEND_NODE_ENV=development
ATC_FRONTEND_PORT=5050
# ATC_FRONTEND_LOG_REQUESTS=1
ATC_SERVER_PORT=3000
ATC_SERVER_RUST_LOG=info
# ATC_LOG_FORMAT=json

# Shared tokens (must match across atc-frontend and atc-drone)
ATC_ADMIN_TOKEN=change-me-admin
ATC_REGISTRATION_TOKEN=change-me-registration-token
ATC_WS_TOKEN=change-me-ws-token
ATC_REQUIRE_WS_TOKEN=true

# =========================
# Optional: TLS (production-like demo)
# =========================
# Generate demo certs (writes into ./certs; ignored by git):
#   ./tools/gen_tls_certs.sh
#
# Then set:
# ATC_SERVER_URL=https://atc-drone:3000
# ATC_SERVER_CA_CERT_PATH=/certs/ca.pem
# ATC_TLS_CERT_PATH=/certs/atc-drone.pem
# ATC_TLS_KEY_PATH=/certs/atc-drone-key.pem
# ATC_ENV=production

# Optional: if Flight Blender endpoints require auth in your setup
BLENDER_AUTH_TOKEN=

# Terrain throttling (set >0 to avoid hammering terrain-api; 25ms ~= 40 req/s)
ATC_TERRAIN_REQUEST_MIN_INTERVAL_MS=25

# Rate limiter IP caps (DoS protection; set to 0 to disable)
ATC_RATE_LIMIT_MAX_IPS=50000
ATC_RATE_LIMIT_ENTRY_TTL_S=600

# Flights list pagination caps (DoS protection; set max to 0 to disable)
ATC_FLIGHTS_DEFAULT_LIMIT=200
ATC_FLIGHTS_MAX_LIMIT=1000

# Route planner request caps (DoS protection; set to 0 to disable)
ATC_ROUTE_PLANNER_MAX_WAYPOINTS=256
ATC_ROUTE_PLANNER_MAX_DISTANCE_M=200000

# =========================
# Cesium Ion (optional)
# =========================
# Needed for: OSM Buildings, Google Photorealistic 3D Tiles, World Terrain, and/or Google 2D imagery assets.
# Never commit real tokens. Put your token in your local `.env` only.
CESIUM_ION_TOKEN=
# Default base imagery for /control/map and /control/remote-id (optional):
# - 2 = Bing Maps Aerial
# - 3 = Bing Maps Aerial with Labels
# - 3830182 = Google Maps 2D Satellite (example from your Ion account)
ION_BASE_IMAGERY_ASSET_ID=
# 2275207 = Google Photorealistic 3D Tiles (global Ion asset)
GOOGLE_3D_TILES_ASSET_ID=
# 96188 = Cesium OSM Buildings (global Ion asset)
OSM_BUILDINGS_ASSET_ID=

# =========================
# Flight Blender (Django)
# =========================
# Required: Django secret
BLENDER_SECRET_KEY=change-me-flight-blender-secret-key

# Optional: RSA private key PEM for Blender JOSE signing + `/signing_public_key` JWKS publishing.
# Leave blank unless youâ€™re using signed responses / JOSE flows.
BLENDER_OIDC_SIGNING_PRIVATE_KEY_PEM=

# Demo-only settings (do not use in production)
# Set to 1 only for local sandboxes.
BLENDER_IS_DEBUG=0
# Comma-separated hostnames allowed for Django Host header validation.
# For production, set this to your external FQDN(s).
BLENDER_ALLOWED_HOSTS=localhost,127.0.0.1,flight-blender,atc-frontend
BLENDER_BYPASS_AUTH_TOKEN_VERIFICATION=0
BLENDER_DISABLE_JSON_LOGGING=0
BLENDER_ENABLE_CONFORMANCE_MONITORING=1
BLENDER_USSP_NETWORK_ENABLED=1

# Redis used by Flight Blender + Celery
BLENDER_REDIS_PASSWORD=change-me-blender-redis-password

# Postgres used by Flight Blender
BLENDER_DB_USER=mydatabaseuser
BLENDER_DB_PASSWORD=change-me-blender-db-password
BLENDER_DB_NAME=mydatabase

# DSS client credentials used by Flight Blender when USSP network is enabled
DSS_CLIENT_ID=local-uss-1
DSS_CLIENT_SECRET=change-me-dss-client-secret

# InterUSS DSS images + schema versions
# These must align with each other and with the `interuss-dss` submodule tag.
# Run `./tools/check_dss_pin.sh` after changing any DSS version pins.
DSS_IMAGE_TAG=v0.15.0
DSS_RID_DB_VERSION=4.0.0
DSS_SCD_DB_VERSION=3.1.0

# =========================
# Optional data directories
# =========================
# If you want to override the default host paths in docker-compose.yml:
# ATC_OSM_DIR=./data/osm
# ATC_OVERPASS_DB_DIR=./data/overpass
# ATC_TERRAIN_DIR=./data/terrain/copernicus

# =========================
# MAVLink Gateway (optional)
# =========================
# MAVLINK_ENDPOINT=udp:0.0.0.0:14550
# ATC_DRONE_ID=DRONE0001
# ATC_OWNER_ID=
# ATC_SESSION_TOKEN=
# ATC_TELEMETRY_HZ=5
# ATC_COMMAND_POLL_HZ=2
# ATC_TARGET_REACHED_M=12
# ATC_TLS_INSECURE=0
